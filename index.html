<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>英语作文批改助手</title>
<style>
:root{color-scheme:light}
*{box-sizing:border-box}
body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;margin:0;padding:32px;background:linear-gradient(135deg,#eef2ff 0%,#fef6fb 55%,#f5fbff 100%);color:#111;min-height:100vh;display:flex;align-items:center;justify-content:center}
.container{width:100%;max-width:960px;background:#fff;padding:32px;border-radius:24px;box-shadow:0 20px 50px rgba(15,23,42,.12);border:1px solid rgba(15,23,42,.06)}
.header{display:flex;align-items:flex-start;justify-content:space-between;gap:16px;margin-bottom:24px}
h1{font-size:26px;margin:0;color:#0f172a}
.tagline{color:#475467;font-size:14px;margin-top:6px}
.badge{background:#e0f2ff;color:#0f5cc0;padding:6px 12px;border-radius:999px;font-size:13px;font-weight:600}
label{font-size:13px;color:#475467;margin-bottom:8px;display:block;font-weight:600}
textarea{width:100%;min-height:260px;padding:16px;border:1px solid #d0d7de;border-radius:16px;font-size:15px;line-height:1.6;background:#f8fafc;transition:border .2s,box-shadow .2s}
textarea:focus{outline:none;border-color:#0f62fe;box-shadow:0 0 0 4px rgba(15,98,254,.12);background:#fff}
.row{display:flex;gap:12px;flex-wrap:wrap;margin:20px 0 12px}
button{padding:12px 24px;border:none;border-radius:999px;background:linear-gradient(135deg,#0f62fe,#2563eb);color:#fff;font-size:15px;font-weight:600;cursor:pointer;transition:transform .2s,box-shadow .2s}
button:hover{transform:translateY(-1px);box-shadow:0 12px 24px rgba(37,99,235,.25)}
button[disabled]{opacity:.65;cursor:not-allowed;box-shadow:none;transform:none}
pre{white-space:pre-wrap;background:#0f172a;color:#e2e8f0;border-radius:20px;padding:20px;min-height:200px;font-size:14px;line-height:1.7;border:1px solid rgba(15,23,42,.3)}
.status{display:flex;align-items:center;gap:8px;font-size:13px}
.status span{color:#475467}
.status .error{color:#d1242f;font-weight:600}
.loading-indicator{display:flex;align-items:center;gap:10px;font-size:14px;color:#0f62fe;opacity:0;transform:translateY(-6px);transition:opacity .2s,transform .2s}
.loading-indicator.visible{opacity:1;transform:translateY(0)}
.spinner{width:18px;height:18px;border-radius:50%;border:3px solid #cfe0ff;border-top-color:#0f62fe;animation:spin 1s linear infinite}
@keyframes spin{to{transform:rotate(360deg)}}
</style>
</head>
<body>
<div class="container">
<div class="header">
<div>
<h1>英语作文批改助手</h1>
<p class="tagline">智能批改 · 结构化评分 · 精准错误指摘</p>
</div>
<div class="badge">AI 驱动</div>
</div>
<label for="essay">在下方输入英文作文</label>
<textarea id="essay" placeholder="请输入英文作文..."></textarea>
<div class="row">
<button id="gradeBtn">批改</button>
<div class="loading-indicator" id="loadingIndicator">
<div class="spinner"></div>
<span>正在调用 AI 接口，请稍候...</span>
</div>
</div>
<div class="status">
<span id="status" class="error"></span>
</div>
<pre id="output"></pre>
</div>
<script>
const GRADE_PROMPT = "你是一名专业的英语作文批改老师。请对用户提供的英文作文进行评分与详细评语。评分满分为25分，严格按照以下维度给出分项分数并计算总分：\n\n- 内容与思想：10分\n- 结构与连贯：5分\n- 词汇与表达：5分\n- 语法与拼写：5分\n\n输出要求（必须严格遵守）：\n1) 第一行只输出总分，格式：总分：X/25\n2) 分项评分（每项一行），格式：内容与思想：x/10；结构与连贯：x/5；词汇与表达：x/5；语法与拼写：x/5\n3) 评语：用中文简要评价文章的优点与不足，指出整体问题与改进方向\n4) 错误指摘：逐条列出明显错误。每条包含：\n- 原句或短语\n- 错误类型（语法/拼写/词汇/逻辑/标点）\n- 说明\n- 建议修改（给出一条更好的改写）\n\n其他要求：\n- 只评价英语内容，不评价题外信息\n- 如果作文不足50词，提示“字数偏少”，但仍按上述维度给分\n- 尽量引用文中原句以便定位错误\n- 评分要一致且可解释，避免自相矛盾\n- 输出全部用中文";
const essayEl = document.getElementById("essay");
const gradeBtn = document.getElementById("gradeBtn");
const outputEl = document.getElementById("output");
const statusEl = document.getElementById("status");
const loadingEl = document.getElementById("loadingIndicator");
function setLoading(isLoading){
gradeBtn.disabled=isLoading;
gradeBtn.textContent=isLoading?"批改中...":"批改";
if(loadingEl){loadingEl.classList.toggle("visible",isLoading);}
}
async function gradeEssay(){
statusEl.textContent="";
outputEl.textContent="";
const essay = (essayEl.value||"").trim();
const apiKey = 'sk-UilA5Agjyn965UiX4Z0fwIKRbHgN6FVTcQHleCX0boRXNsE4';
const model = "kimi-k2-turbo-preview";
if(!essay){statusEl.textContent="请先输入英文作文";return}
if(!apiKey){statusEl.textContent="请填写 Kimi API Key";return}
setLoading(true);
try{
const userContent = "以下是需要批改的英文作文，请按上述格式输出：\n\n"+essay;
const res = await fetch("https://api.moonshot.cn/v1/chat/completions",{
method:"POST",
headers:{"Content-Type":"application/json","Authorization":"Bearer "+apiKey},
body:JSON.stringify({model,temperature:0.2,messages:[{role:"system",content:GRADE_PROMPT},{role:"user",content:userContent}]})
});
if(!res.ok){const t = await res.text();throw new Error(t||("HTTP "+res.status))}
const data = await res.json();
const content = data&&data.choices&&data.choices[0]&&data.choices[0].message&&data.choices[0].message.content?data.choices[0].message.content:"无结果";
outputEl.textContent = content;
}catch(e){statusEl.textContent = "请求失败："+(e&&e.message?e.message:String(e));}
finally{setLoading(false);}
}
gradeBtn.addEventListener("click",gradeEssay);
</script>
</body>
</html>